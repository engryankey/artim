{% extends 'base.html' %}
{% load django_bootstrap5 %}
{% load static %}
{% load order_tags %}
{% block title %}
    Order service
{% endblock title %}
    

{% block body %}
<div class="row">
    <div class="col-4 text-center">
        <div class="row">
            <div class="col-md-1"></div>
            <div class="col-md-10">
                {% if user.userprofile.photo %}
                <img src="{{MEDIA_URL}}/{{user.userprofile.photo}}" class="img-fluid img-thumbnail rounded-circle" alt="{{user.first_name}}"> {% else %} {% if user.userprofile.gender == "male" or user.is_staff%}
                <img src="{% static "images/male.jpg " %}" class="img-fluid img-thumbnail rounded-circle" alt="{{user.first_name}}"> {% else %}
                <img src="{% static "images/female.jpg " %}" class="img-fluid img-thumbnail rounded-circle" alt="{{user.first_name}}"> {% endif %} {% endif %}
            </div>
            <div class="col-md-1"></div>
        </div>
        {% if user.is_staff %}
            <h5><span class="badge bg-success">ADMIN</span></h5>
        {% else %} 
        {% if user.userprofile.user_type == "artisan" %}
            <h5><span class="badge bg-primary">ARTISAN</span></h5>
        {% else %}
            <h5><span class="badge bg-info">CUSTOMER</span></h5>
        {% endif %} 
        {% endif %} 
        <h4 class="form_text">{{user.first_name.title}} {{user.last_name.title}}</h4>
        <span class="form_text my-1"><strong>Joined:</strong></span> <strong>{{user.date_joined}}</strong><br />
        <i class="fas fa-user-tag form_text my-2"></i> <strong>{{user.username}}</strong><br />
        <i class="far fa-calendar-alt form_text my-2"></i> <strong>{{user.userprofile.age}} years old</strong><br />
        <i class="fas fa-venus-mars form_text my-2"></i> <strong>{{user.userprofile.gender.title}}</strong><br />
        <i class="fas fa-map-marker-alt form_text my-2"></i> <strong>{{user.userprofile.city.title}}, UK</strong>
    
    </div>
    <div class="col-8 form_text">
        <h5 class="blue text-center"><strong>Make payment by Credit Card or PayPal</strong></h5>
    <form method="post">
        {% csrf_token %}
        <div class="mb-3">
            <div class="row g-2">
                <div class="col-md-7">
                <div class="form-floating">
                    <input type="text" class="form-control" minlength="16" maxlength="16" id="floatingInputGrid" placeholder="Credit card number" value="" onkeypress="return (event.charCode !==8 && event.charCode ===0 || (event.charCode >= 48 && event.charCode <= 57))" required />
                    <label for="floatingInputGrid">Credit card number</label>
                </div>
                </div>
                <div class="col-md-3">
                <div class="form-floating">
                    <input type="text" class="form-control" id="floatingInputGrid" minlength="4" maxlength="4" placeholder="MMYY" onkeypress="return (event.charCode !==8 && event.charCode ===0 || (event.charCode >= 48 && event.charCode <= 57))" required />
                    <label for="floatingSelectGrid">Exp Date (MMYY)</label>
                </div>
                </div>
                <div class="col-md-2">
                    <div class="form-floating">
                    <input type="text" class="form-control" id="floatingInputGrid" placeholder="CVV"  minlength="3" maxlength="3" onkeypress="return (event.charCode !==8 && event.charCode ===0 || (event.charCode >= 48 && event.charCode <= 57))" required />
                    <label for="floatingSelectGrid">CVV</label>
                    </div>
                </div>
            </div>
        </div>
        <div class="form-floating mb-3">
            <input type="text" class="form-control" id="floatingInput" value="{{user.userprofile.address}}" placeholder="Billing address">
            <label for="floatingInput">Billing address</label>
        </div>
        <div class="form-floating mb-3">
            <input type="text" class="form-control" id="floatingInput" value="{{user.userprofile.city}}" placeholder="Billing city">
            <label for="floatingInput">Billing city</label>
        </div>
        <div class="form-floating mb-3">
            <input type="text" class="form-control" id="floatingInput" value="{{user.userprofile.post_code}}" placeholder="Billing postcode">
            <label for="floatingInput">Billing postcode</label>
        </div>
        <div class="text-center">
            <button class="btn btn-primary my-2" type="submit"><strong>MAKE PAYMENT OF 	&#163;{{price}}</strong></button>
        </div>
    </form>
    <div class="text-center">
        {{ form.render }}
    </div>
</div>
<br>
<script>
    var services = document.getElementById("services");
    services.style.display = "none";
    function toggler() {
        var selected;
        var radio1 = document.getElementById("user_type_0");
        var radio2 = document.getElementById("user_type_1");
        if (radio1.checked) {
            selected = radio1.value;
            services.style.display = "none";
        } else if(radio2.checked) {
            selected = radio2.value;
            services.style.display = "block";
        }
        }
</script>
{% endblock body %}